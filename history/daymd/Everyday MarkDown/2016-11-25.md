# 单元测试  

1. 单元测试是针对软件设计的最小单位——程序模块，进行正确性检验的测试工作。其目的在于发现每个程序模块内部可能存在的差错。  
在编码的过程中作单元测试，其花费是最小的，而回报却特别高。  
合格的代码应该具备以下性质：正确性、清晰性、规范性、一致性、高效性等。
2. 单元测试步骤  
在代码编写完成后的单元测试工作主要分为两个步骤人工静态检查和动态执行跟踪。  
人工检查  
    - 检查算法的逻辑正确性;    
    - 模块接口的正确性检查;  
    - 输入参数有没有作正确性检查;  
    - 调用其他方法接口的正确性;  
    - 出错处理。模块代码要求能预见出错的条件，并设置适当的出错处理，以便在一旦程序出错时，能对出错程序重做安排，保证其逻辑的正确性。  
    - 保证表达式、SQL语句的正确性；  
    - 检查常量或全局变量使用的正确性;  
    - 表示符定义的规范一致性;  
    - 程序风格的一致性、规范性;  

  动态执行跟踪  
动态执行测试通常分为黑盒测试与白盒测试。黑盒测试指已知产品的功能设计规格，可以进行测试证明每个实现了的功能是否符合要求。白盒测试指已知产品的内部工作过程，可以通过测试证明每种内部操作是否符合设计规格的要求，所有内部成分是否已经经过检查。  
对于单元测试来说主要应该采用白盒测试法对每个模块的内部作跟踪检查测试。对于单元白盒测试，应该对程序模块进行如下检查：  
　　1. 对模块内所有独立的执行路径至少测试一次;  
　　2. 对所有的逻辑判定，取“真”与“假”的两种情况都至少执行一次;  
　　3. 在循环的边界和运行界限内执行循环体;  
　　4. 测试内部数据的有效性等等。  
　　单元白盒跟踪测试，通常需要做如下三项工作：  
　　1. 设计测试用例;  
　　2. 设计测试类模块;  
　　3. 跟踪调试。  
3. 测试用例设计  
通常动态执行跟踪调试是在编码阶段进行的。在对源程序作静态人工检查之后就可以开始进行单元测试的测试用例设计。利用设计文档，设计可以验证程序功能、找出程序错误的多个测试用例。
4. 测试类设计  
对于今天讲的testng和mockito  
我今天下午试了试在原来的代码上加上单元测试，刚开始的时候按照流程感觉有些混乱（因为之前没有接触过单元测试）。试了试依赖注入和配置文件，感觉刚开始很困难。尤其是我在when().then上面困惑了一段时间。一开始以为when().then()就是模拟测试类的流程，输进去什么，thenreturn的结果自动去和正确的结果进行匹配，判断正误。然后就不知道这样的话还用断言做什么。后来搞懂了，when().then是配置其他模块的，声明其他模块被调用时相应入参的返回值是多少。这样就在不知道其他模块的情况下实现本模块的测试，然后通过断言来匹配结果。  
单元测试就是让某个单元模块自己去测试，不需要其他模块是否完成。这对于大型项目来说，避免了测试工作需要等待整个流程完成之后才能测试的尴尬。

![1](http://git.gyyx.cn/caishuai/static/raw/master/img/25p1.png)   
