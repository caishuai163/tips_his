# 今天的工作  
+ 今天主要是写接口，就写了一个接口，sql语句写了一上午，到下午才写完。  
有一点我感觉有些混乱，写的时候逻辑上是那么想的，但是写的时候就怎么也写不到。感觉在Java语法里面很好实现的一个功能，到了sql查询的时候，感觉java中的逻辑很难在sql中实现，涉及到的一些判断的时候实现就比较困难。感觉还是对sql的高级语法用途不太熟悉，不够熟练。   
还有就是我感觉逻辑上出现的问题，需求方却不去考虑这些问题。一些业务上的问题，虽然说后台管理人员不会去那么做，但是一旦出现操作失误，面向用户的就会出现显示的问题，内容显示错乱。   
+ 还有一个已解决的问题。就是今天下午的时候，前端来找我和我说要改数据的接口，为了适应之前.NET的写好的js脚本。然后我就改了，说实话还是经验不足吧，第一次的时候我是把resultBEan又重新定义了一个新的，然后李鹄跟我说，你总不能为了这一小部分再去定义一个类吧。说实话真的是经验不足，后来改成了Map返回。问题出现在map在转换成json的时候，之前返回实体类是用的responseBody，然后我就直接去用它返回Map了。结果抛出找不到com.fasterxml.jackson.databind.ObjectWriter.forType(),查了一下，发现是com.fasterxml.jackson.databind包ObjectWriter类里面没有这个方法，这个方法是在2.5版本之后新增的，而当前用的是2.4.0，在自己这里把关于com.fasterxml.jackson.core的包全部改成了2.8.3，改过之后果然可以转换map了。之后没敢直接提交到GIt上，去和李鹄商量了一下，告诉他这个问题和我提出的解决方法，以及理由，然后他让我回去试之前的返回实体类可不可以转换，我试过之后他让我把版本改了提交到git上。  
+ 今天还遇到一件事，就是跨域传输的，了解到不光前端js要以jsonp传输，返回的时候也要在controller里处理。处理方法是：配置一个支持jsonp的配置，根据callback 请求参数或配置的其他参数来确定返回jsonp协议的数据。(参考了[使用ResponseBodyAdvice支持jsonp](http://m635674608.iteye.com/blog/2266180 "link
") )
```
@ControllerAdvice(basePackageClasses = ManhuaUserCenterController.class)
class JsonpAdvice extends AbstractJsonpResponseBodyAdvice {
	public JsonpAdvice() {
		super("callback", "jsonp");
	}
}
```
