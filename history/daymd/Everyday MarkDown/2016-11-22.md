# 数据库中的锁

行锁就是只锁定那一行，那一条记录，别的连接下的操作还可以操作这张表。  
表锁就是锁定整张表，只有当前连接执行完事务，才可以解锁。  

行锁的优点：
- 当在许多线程中访问不同的行时只存在少量锁定冲突。
- 回滚时只有少量的更改。
- 可以允许长时间锁定单一的行。  

行锁的缺点：
- 比表锁占用更多的内存。
- 当在表的大部分中使用时，比表锁速度慢.因为必须获取更多的锁。
- 如果经常进行GROUP BY操作或者必须经常扫描整个表，比其它锁定明显慢很多。

在以下情况下，表锁优先于行锁：

+ 表的大部分语句用于读取。
+ 对严格的关键字进行读取和更新，你可以更新或删除可以用单一的读取的关键字来提取的一行：
SELECT 结合并行的INSERT语句，并且只有很少的UPDATE或DELETE语句。
+ 在整个表上有许多扫描或GROUP BY操作，没有任何写操作。

表锁在下面的情况下也存在问题：

1. 一个客户发出长时间运行的查询。
2. 然后，另一个客户对同一个表进行更新。该客户必须等待直到SELECT完成。
3. 另一个客户对同一个表上发出了另一个SELECT语句。因为UPDATE比SELECT优先级高，该SELECT语句等待UPDATE完成，并且等待第1个SELECT完成。

解决  
1. 查询是否锁表
show OPEN TABLES where In_use > 0;
2. 查询进程show processlist 查询到相对应的进程===然后 kill    id
